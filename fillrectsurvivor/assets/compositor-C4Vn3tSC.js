(function(){var e=typeof global==`object`&&global&&global.Object===Object&&global,t=typeof self==`object`&&self&&self.Object===Object&&self,n=(e||t||Function(`return this`)()).Symbol,r=Object.prototype,i=r.hasOwnProperty,a=r.toString,o=n?n.toStringTag:void 0;function s(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch{}var s=a.call(e);return r&&(t?e[o]=n:delete e[o]),s}var ee=s,te=Object.prototype.toString;function c(e){return te.call(e)}var l=c,u=`[object Null]`,d=`[object Undefined]`,f=n?n.toStringTag:void 0;function ne(e){return e==null?e===void 0?d:u:f&&f in Object(e)?ee(e):l(e)}var p=ne;function re(e){return typeof e==`object`&&!!e}var ie=re,ae=`[object Symbol]`;function oe(e){return typeof e==`symbol`||ie(e)&&p(e)==ae}var m=oe,h=/\s/;function g(e){for(var t=e.length;t--&&h.test(e.charAt(t)););return t}var _=g,v=/^\s+/;function y(e){return e&&e.slice(0,_(e)+1).replace(v,``)}var b=y;function x(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var S=x,C=NaN,w=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,E=/^0o[0-7]+$/i,D=parseInt;function O(e){if(typeof e==`number`)return e;if(m(e))return C;if(S(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=S(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=b(e);var n=T.test(e);return n||E.test(e)?D(e.slice(2),n?2:8):w.test(e)?C:+e}var k=O,A=1/0,j=17976931348623157e292;function M(e){return e?(e=k(e),e===A||e===-A?(e<0?-1:1)*j:e===e?e:0):e===0?e:0}var N=M,P=`[object AsyncFunction]`,F=`[object Function]`,I=`[object GeneratorFunction]`,L=`[object Proxy]`;function R(e){if(!S(e))return!1;var t=p(e);return t==F||t==I||t==P||t==L}var z=R,B=9007199254740991,V=/^(?:0|[1-9]\d*)$/;function se(e,t){var n=typeof e;return t??=B,!!t&&(n==`number`||n!=`symbol`&&V.test(e))&&e>-1&&e%1==0&&e<t}var H=se;function U(e,t){return e===t||e!==e&&t!==t}var W=U,G=9007199254740991;function K(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=G}var ce=K;function le(e){return e!=null&&ce(e.length)&&!z(e)}var ue=le;function de(e,t,n){if(!S(n))return!1;var r=typeof t;return(r==`number`?ue(n)&&H(t,n.length):r==`string`&&t in n)?W(n[t],e):!1}var q=de,fe=Math.floor,pe=Math.random;function me(e,t){return e+fe(pe()*(t-e+1))}var he=me,ge=parseFloat,_e=Math.min,ve=Math.random;function J(e,t,n){if(n&&typeof n!=`boolean`&&q(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t==`boolean`?(n=t,t=void 0):typeof e==`boolean`&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=N(e),t===void 0?(t=e,e=0):t=N(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ve();return _e(e+i*(t-e+ge(`1e-`+((i+``).length-1))),t)}return he(e,t)}var Y=J,ye=Math.ceil,be=Math.max;function xe(e,t,n,r){for(var i=-1,a=be(ye((t-e)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=e,e+=n;return o}var Se=xe;function Ce(e){return function(t,n,r){return r&&typeof r!=`number`&&q(t,n,r)&&(n=r=void 0),t=N(t),n===void 0?(n=t,t=0):n=N(n),r=r===void 0?t<n?1:-1:N(r),Se(t,n,r,e)}}var we=Ce();let X,Z,Q,$=[];onmessage=e=>{let t=e.data;switch(t.type){case`init`:X=t.offscreen,Z=X.getContext(`2d`),Q=t.n_layers;break;case`bmp`:{let{worker_id:e,frame_id:n,bmp:r}=t;$[e]=[n,r];let i=X.width,a=X.height;function o(){Z.fillStyle=`#000000`,Z.fillRect(0,0,X.width,X.height),Z.fillRect(0,0,i,a);for(let e of we(4)){Z.fillStyle=`#${Y(1)}${Y(1)}${Y(1)}`;let e=Y(i);Z.fillRect(Y(i)-.5*e,Y(a)-.5*e,e,e)}$.forEach(([e,t])=>{Z.drawImage(t,0,0),t.close()})}$[0]!==void 0&&$.length===Q&&$.every(e=>e&&e[0]===$[0][0])&&o()}}}})();